import{r as e,j as r}from"./glm-react-DdmR4A2n.js";import{c as n}from"./glm-lodash-es-EdpLiYrM.js";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=["variant","size","disabled","loading","className","children","onClick"];function i(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function l(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){a(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function a(e,r,n){var o;return o=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(r,"string"),(r="symbol"==t(o)?o:String(o))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function c(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=e.forwardRef((function(e,n){var t=e.variant,i=void 0===t?"default":t,a=e.size,u=void 0===a?"middle":a,s=e.disabled,d=void 0!==s&&s,f=e.loading,p=void 0!==f&&f,h=e.className,m=void 0===h?"":h,g=e.children,b=e.onClick,v=c(e,o),y=["lm-button","lm-button-".concat(i),"lm-button-".concat(u),d&&"lm-button-disabled",p&&"lm-button-loading",m].filter(Boolean).join(" ");return r.jsxs("button",l(l({ref:n,className:y,disabled:d,onClick:function(e){p||d?e.preventDefault():null==b||b(e)}},v),{},{children:[p&&r.jsx("span",{className:"lm-button-loading-icon",children:"⏳"}),g]}))}));u.displayName="Button";const s=u;function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return f(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}var p=function(e,r){for(var t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).clone,o=function e(n,t,o,i){var l=!n.children||0===n.children.length,a=function(e,r){if(0===e.length||0===r.length)return null;var n=r[r.length-1];if(n>0){var t=e[e.length-1];if(t&&t.children)return t.children[n-1]}var o=e[e.length-1];return o&&o.isRoot?null:o}(i,o);if(r({node:n,floor:t,parentIndex:o,leaf:l,parentNodes:i,nearestNode:a}))return!0;if(!l)for(var c=0;c<n.children.length;c++){if(e(n.children[c],[].concat(d(t),[c+1]),[].concat(d(o),[c]),[].concat(d(i),[n])))return!0}return!1},i=void 0!==t&&t?n(e):e,l=0;l<i.length;l++){if(o(i[l],[l+1],[l],[{children:i,isRoot:!0}]))break}return i},h={completeTreeFunc:p,getTreeIdInfo:function(e){var r=e.treeData,n=e.id,t=null;return p(r,(function(e){return n===e.node.id&&(t=e,!0)})),t},removeTreeNodeById:function(e){var r=e.treeData,t=e.id,o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clone,i=void 0!==o&&o?n(r):r,l={success:!1,info:null,treeData:i,nearestNode:null};return p(i,(function(e){if(e.node.id===t){var r=e.parentNodes[e.parentNodes.length-1],n=e.parentIndex[e.parentIndex.length-1];return r&&r.children&&(l.info=e,l.success=!0,l.nearestNode=e.nearestNode,r.children.splice(n,1)),!0}return!1})),l},promoteTreeNodeById:function(e){var r=e.treeData,t=e.id,o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clone,i=void 0!==o&&o?n(r):r,l={success:!1,info:null,treeData:i};return p(i,(function(e){if(e.node.id===t){if(l.info=e,1===e.parentNodes.length&&e.parentNodes[0].isRoot)return l.message="节点已经是顶层，无法再向上提升",!0;var r=e.parentNodes[e.parentNodes.length-1],n=e.parentNodes[e.parentNodes.length-2],o=e.parentIndex[e.parentIndex.length-1],a=e.parentIndex[e.parentIndex.length-2];if(r&&r.children){var c,u=r.children.slice(o+1),s=r.children.splice(o,1)[0];if(u.length>0&&r.children.splice(o),u.length>0)s.children||(s.children=[]),(c=s.children).push.apply(c,d(u));n.isRoot?i.splice(a+1,0,s):n&&n.children&&n.children.splice(a+1,0,s),l.success=!0,l.message=u.length>0?"节点提升成功，并将 ".concat(u.length," 个后续兄弟节点作为其子节点"):"节点提升成功"}else l.message="节点提升失败，无法找到合适的父级结构";return!0}return!1})),l.info||(l.message="未找到指定的节点"),l},demoteTreeNodeById:function(e){var r=e.treeData,t=e.id,o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clone,i=void 0!==o&&o?n(r):r,l={success:!1,info:null,treeData:i};return p(i,(function(e){if(e.node.id===t){l.info=e;var r=e.parentIndex[e.parentIndex.length-1];if(r<=0)return l.message="节点没有前一个兄弟节点，无法向下降级",!0;var n=e.parentNodes[e.parentNodes.length-1];if(!n||!n.children)return l.message="节点降级失败，无法找到父级结构",!0;var o=n.children[r-1];if(!o)return l.message="节点降级失败，无法找到前一个兄弟节点",!0;var i=n.children.splice(r,1)[0];return o.children||(o.children=[]),o.children.push(i),l.success=!0,l.message="节点降级成功",!0}return!1})),l.info||(l.message="未找到指定的节点"),l}};export{s as B,h as t};
