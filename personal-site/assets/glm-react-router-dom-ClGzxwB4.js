import{r as e,a as t}from"./glm-react-B-zrKVhV.js";import{R as n}from"./glm-react-dom-YOCEErA7.js";import{m as r,D as i,a,R as o,u as s,b as u,c}from"./glm-react-router-DVZCq2ug.js";import{c as l,b as f,E as d}from"./glm-@remix-run-Du9VVFEx.js";
/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}function m(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map((e=>[n,e])):[[n,r]])}),[]))}try{window.__reactRouterVersion="6"}catch(F){}function p(e,t){return l({basename:null==t?void 0:t.basename,future:v({},null==t?void 0:t.future,{v7_prependBasename:!0}),history:f({window:null==t?void 0:t.window}),hydrationData:(null==t?void 0:t.hydrationData)||h(),routes:e,mapRouteProperties:r,window:null==t?void 0:t.window}).initialize()}function h(){var e;let t=null==(e=window)?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=v({},t,{errors:w(t.errors)})),t}function w(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&"RouteErrorResponse"===i.__type)n[r]=new d(i.status,i.statusText,i.data,!0===i.internal);else if(i&&"Error"===i.__type){if(i.__subType){let e=window[i.__subType];if("function"==typeof e)try{let t=new e(i.message);t.stack="",n[r]=t}catch(F){}}if(null==n[r]){let e=new Error(i.message);e.stack="",n[r]=e}}else n[r]=i;return n}const y=e.createContext({isTransitioning:!1}),g=e.createContext(new Map),S=t.startTransition,b=n.flushSync;function T(e){b?b(e):e()}class E{constructor(){this.status="pending",this.promise=new Promise(((e,t)=>{this.resolve=t=>{"pending"===this.status&&(this.status="resolved",e(t))},this.reject=e=>{"pending"===this.status&&(this.status="rejected",t(e))}}))}}function L(t){let{fallbackElement:n,router:r,future:s}=t,[u,c]=e.useState(r.state),[l,f]=e.useState(),[d,v]=e.useState({isTransitioning:!1}),[m,p]=e.useState(),[h,w]=e.useState(),[b,L]=e.useState(),_=e.useRef(new Map),{v7_startTransition:x}=s||{},j=e.useCallback((e=>{x?function(e){S?S(e):e()}(e):e()}),[x]),k=e.useCallback(((e,t)=>{let{deletedFetchers:n,unstable_flushSync:i,unstable_viewTransitionOpts:a}=t;n.forEach((e=>_.current.delete(e))),e.fetchers.forEach(((e,t)=>{void 0!==e.data&&_.current.set(t,e.data)}));let o=null==r.window||"function"!=typeof r.window.document.startViewTransition;if(a&&!o){if(i){T((()=>{h&&(m&&m.resolve(),h.skipTransition()),v({isTransitioning:!0,flushSync:!0,currentLocation:a.currentLocation,nextLocation:a.nextLocation})}));let t=r.window.document.startViewTransition((()=>{T((()=>c(e)))}));return t.finished.finally((()=>{T((()=>{p(void 0),w(void 0),f(void 0),v({isTransitioning:!1})}))})),void T((()=>w(t)))}h?(m&&m.resolve(),h.skipTransition(),L({state:e,currentLocation:a.currentLocation,nextLocation:a.nextLocation})):(f(e),v({isTransitioning:!0,flushSync:!1,currentLocation:a.currentLocation,nextLocation:a.nextLocation}))}else i?T((()=>c(e))):j((()=>c(e)))}),[r.window,h,m,_,j]);e.useLayoutEffect((()=>r.subscribe(k)),[r,k]),e.useEffect((()=>{d.isTransitioning&&!d.flushSync&&p(new E)}),[d]),e.useEffect((()=>{if(m&&l&&r.window){let e=l,t=m.promise,n=r.window.document.startViewTransition((async()=>{j((()=>c(e))),await t}));n.finished.finally((()=>{p(void 0),w(void 0),f(void 0),v({isTransitioning:!1})})),w(n)}}),[j,l,m,r.window]),e.useEffect((()=>{m&&l&&u.location.key===l.location.key&&m.resolve()}),[m,h,u.location,l]),e.useEffect((()=>{!d.isTransitioning&&b&&(f(b.state),v({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}),L(void 0))}),[d.isTransitioning,b]),e.useEffect((()=>{}),[]);let P=e.useMemo((()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:e=>r.navigate(e),push:(e,t,n)=>r.navigate(e,{state:t,preventScrollReset:null==n?void 0:n.preventScrollReset}),replace:(e,t,n)=>r.navigate(e,{replace:!0,state:t,preventScrollReset:null==n?void 0:n.preventScrollReset})})),[r]),F=r.basename||"/",U=e.useMemo((()=>({router:r,navigator:P,static:!1,basename:F})),[r,P,F]);return e.createElement(e.Fragment,null,e.createElement(i.Provider,{value:U},e.createElement(a.Provider,{value:u},e.createElement(g.Provider,{value:_.current},e.createElement(y.Provider,{value:d},e.createElement(o,{basename:F,location:u.location,navigationType:u.historyAction,navigator:P,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},u.initialized||r.future.v7_partialHydration?e.createElement(R,{routes:r.routes,future:r.future,state:u}):n))))),null)}function R(e){let{routes:t,future:n,state:r}=e;return s(t,void 0,r,n)}var _,x,j,k;function P(t){let n=e.useRef(m(t)),r=e.useRef(!1),i=u(),a=e.useMemo((()=>function(e,t){let n=m(e);return t&&t.forEach(((e,r)=>{n.has(r)||t.getAll(r).forEach((e=>{n.append(r,e)}))})),n}(i.search,r.current?null:n.current)),[i.search]),o=c(),s=e.useCallback(((e,t)=>{const n=m("function"==typeof e?e(a):e);r.current=!0,o("?"+n,t)}),[o,a]);return[a,s]}(x=_||(_={})).UseScrollRestoration="useScrollRestoration",x.UseSubmit="useSubmit",x.UseSubmitFetcher="useSubmitFetcher",x.UseFetcher="useFetcher",x.useViewTransitionState="useViewTransitionState",(k=j||(j={})).UseFetcher="useFetcher",k.UseFetchers="useFetchers",k.UseScrollRestoration="useScrollRestoration";export{L as R,p as c,P as u};
