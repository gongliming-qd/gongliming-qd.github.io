import{r as e}from"./glm-react-B-zrKVhV.js";function n(e,n){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout((()=>e(...r)),n)}}function t({debounce:t,scroll:o,polyfill:s,offsetSize:c}={debounce:0,scroll:!1,offsetSize:!1}){const l=s||("undefined"==typeof window?class{}:window.ResizeObserver);if(!l)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[u,a]=e.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=e.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:u,orientationHandler:null}),f=t?"number"==typeof t?t:t.scroll:null,w=t?"number"==typeof t?t:t.resize:null,h=e.useRef(!1);e.useEffect((()=>(h.current=!0,()=>{h.current=!1})));const[m,v,b]=e.useMemo((()=>{const e=()=>{if(!d.current.element)return;const{left:e,top:n,width:t,height:r,bottom:o,right:s,x:l,y:u}=d.current.element.getBoundingClientRect(),f={left:e,top:n,width:t,height:r,bottom:o,right:s,x:l,y:u};d.current.element instanceof HTMLElement&&c&&(f.height=d.current.element.offsetHeight,f.width=d.current.element.offsetWidth),Object.freeze(f),h.current&&!i(d.current.lastBounds,f)&&a(d.current.lastBounds=f)};return[e,w?n(e,w):e,f?n(e,f):e]}),[a,c,f,w]);function g(){d.current.scrollContainers&&(d.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",b,!0))),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null),d.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",d.current.orientationHandler))}function p(){d.current.element&&(d.current.resizeObserver=new l(b),d.current.resizeObserver.observe(d.current.element),o&&d.current.scrollContainers&&d.current.scrollContainers.forEach((e=>e.addEventListener("scroll",b,{capture:!0,passive:!0}))),d.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",d.current.orientationHandler))}return function(n,t){e.useEffect((()=>{if(t){const e=n;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",e,!0)}}}),[n,t])}(b,!!o),function(n){e.useEffect((()=>{const e=n;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[n])}(v),e.useEffect((()=>{g(),p()}),[o,b,v]),e.useEffect((()=>g),[]),[e=>{!e||e===d.current.element||(g(),d.current.element=e,d.current.scrollContainers=r(e),p())},u,m]}function r(e){const n=[];if(!e||e===document.body)return n;const{overflow:t,overflowX:o,overflowY:i}=window.getComputedStyle(e);return[t,o,i].some((e=>"auto"===e||"scroll"===e))&&n.push(e),[...n,...r(e.parentElement)]}const o=["x","y","top","bottom","left","right","width","height"],i=(e,n)=>o.every((t=>e[t]===n[t]));export{t as j};
