import{R as e,i as t}from"./glm-react-DdmR4A2n.js";import"./glm-use-sync-external-store-DY5wSmA0.js";var n="default"in e?t:e,r=Symbol.for("react-redux-context"),o="undefined"!=typeof globalThis?globalThis:{};function c(){if(!n.createContext)return{};const e=o[r]??(o[r]=new Map);let t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}var i=c();var u={notify(){},get:()=>[]};var s=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement)?n.useLayoutEffect:n.useEffect;var a=function({store:e,context:t,children:r,serverState:o,stabilityCheck:c="once",identityFunctionCheck:a="once"}){const l=n.useMemo((()=>{const t=function(e,t){let n,r=u,o=0,c=!1;function i(){l.onStateChange&&l.onStateChange()}function s(){o++,n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const o=t={callback:n,next:null,prev:t};return o.prev?o.prev.next=o:e=o,function(){r&&null!==e&&(r=!1,o.next?o.next.prev=o.prev:t=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}())}function a(){o--,n&&0===o&&(n(),n=void 0,r.clear(),r=u)}const l={addNestedSub:function(e){s();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),a())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return c},trySubscribe:function(){c||(c=!0,s())},tryUnsubscribe:function(){c&&(c=!1,a())},getListeners:()=>r};return l}(e);return{store:e,subscription:t,getServerState:o?()=>o:void 0,stabilityCheck:c,identityFunctionCheck:a}}),[e,o,c,a]),f=n.useMemo((()=>e.getState()),[e]);s((()=>{const{subscription:t}=l;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),f!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[l,f]);const d=t||i;return n.createElement(d.Provider,{value:l},r)};export{a as P};
