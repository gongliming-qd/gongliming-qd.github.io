"use strict";(self.webpackChunklm_react_tools=self.webpackChunklm_react_tools||[]).push([[518],{13587:function(Z,T,t){t.r(T),t.d(T,{demos:function(){return k}});var R=t(26068),S=t.n(R),P=t(90228),D=t.n(P),L=t(48305),$=t.n(L),z=t(87999),U=t.n(z),p=t(75271),W=t(30005),k={"src-hooks-use-local-storage-demo-0":{component:p.memo(p.lazy(U()(D()().mark(function N(){var I,E;return D()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.resolve().then(t.bind(t,30005));case 2:return I=u.sent,E=I.useLocalStorage,u.abrupt("return",{default:function(){var l=E("my-key","default"),B=$()(l,3),C=B[0],A=B[1],M=B[2];return p.createElement("div",null,p.createElement("p",null,"\u5B58\u50A8\u7684\u503C: ",C),p.createElement("button",{onClick:function(){return A("new value")}},"\u8BBE\u7F6E\u503C"),p.createElement("button",{onClick:function(){return A(function(n){return n+"!"})}},"\u8FFD\u52A0!"),p.createElement("button",{onClick:M},"\u6E05\u9664"))}});case 5:case"end":return u.stop()}},N)})))),asset:{type:"BLOCK",id:"src-hooks-use-local-storage-demo-0",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:`import { useLocalStorage } from 'lm-react-tools';

export default () => {
  const [value, setValue, removeValue] = useLocalStorage('my-key', 'default');

  return (
    <div>
      <p>\u5B58\u50A8\u7684\u503C: {value}</p>
      <button onClick={() => setValue('new value')}>\u8BBE\u7F6E\u503C</button>
      <button onClick={() => setValue(prev => prev + '!')}>\u8FFD\u52A0!</button>
      <button onClick={removeValue}>\u6E05\u9664</button>
    </div>
  );
};`},"lm-react-tools":{type:"NPM",value:"0.2.1"}},entry:"index.jsx"},context:{"lm-react-tools":W},renderOpts:{compile:function(){var N=U()(D()().mark(function E(){var _,u=arguments;return D()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.e(372).then(t.bind(t,80372));case 2:return l.abrupt("return",(_=l.sent).default.apply(_,u));case 3:case"end":return l.stop()}},E)}));function I(){return N.apply(this,arguments)}return I}()}},"src-hooks-use-local-storage-demo-1":{component:p.memo(p.lazy(U()(D()().mark(function N(){var I,E;return D()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Promise.resolve().then(t.bind(t,30005));case 2:return I=u.sent,E=I.useLocalStorage,u.abrupt("return",{default:function(){var l=E("user",{name:"",age:0}),B=$()(l,2),C=B[0],A=B[1];return p.createElement("div",null,p.createElement("input",{placeholder:"\u59D3\u540D",value:C.name,onChange:function(j){return A(S()(S()({},C),{},{name:j.target.value}))}}),p.createElement("input",{type:"number",placeholder:"\u5E74\u9F84",value:C.age,onChange:function(j){return A(S()(S()({},C),{},{age:Number(j.target.value)}))}}),p.createElement("p",null,"\u59D3\u540D: ",C.name),p.createElement("p",null,"\u5E74\u9F84: ",C.age))}});case 5:case"end":return u.stop()}},N)})))),asset:{type:"BLOCK",id:"src-hooks-use-local-storage-demo-1",refAtomIds:[],dependencies:{"index.jsx":{type:"FILE",value:`import { useLocalStorage } from 'lm-react-tools';

export default () => {
  const [user, setUser] = useLocalStorage('user', { name: '', age: 0 });

  return (
    <div>
      <input
        placeholder="\u59D3\u540D"
        value={user.name}
        onChange={e => setUser({ ...user, name: e.target.value })}
      />
      <input
        type="number"
        placeholder="\u5E74\u9F84"
        value={user.age}
        onChange={e => setUser({ ...user, age: Number(e.target.value) })}
      />
      <p>\u59D3\u540D: {user.name}</p>
      <p>\u5E74\u9F84: {user.age}</p>
    </div>
  );
};`},"lm-react-tools":{type:"NPM",value:"0.2.1"}},entry:"index.jsx"},context:{"lm-react-tools":W},renderOpts:{compile:function(){var N=U()(D()().mark(function E(){var _,u=arguments;return D()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t.e(372).then(t.bind(t,80372));case 2:return l.abrupt("return",(_=l.sent).default.apply(_,u));case 3:case"end":return l.stop()}},E)}));function I(){return N.apply(this,arguments)}return I}()}}}},30005:function(Z,T,t){t.r(T),t.d(T,{Button:function(){return p},completeTreeFunc:function(){return l},demoteTreeNodeById:function(){return M},getTreeIdInfo:function(){return B},promoteTreeNodeById:function(){return A},removeTreeNodeById:function(){return C},treeUtils:function(){return j},useLocalStorage:function(){return I}});var R=t(26068),S=t.n(R),P=t(67825),D=t.n(P),L=t(75271),$=t(52676),z=["variant","size","disabled","loading","className","children","onClick"],U=(0,L.forwardRef)(function(n,a){var o=n.variant,f=o===void 0?"default":o,d=n.size,s=d===void 0?"middle":d,g=n.disabled,i=g===void 0?!1:g,r=n.loading,e=r===void 0?!1:r,c=n.className,m=c===void 0?"":c,v=n.children,h=n.onClick,O=D()(n,z),b=function(x){if(e||i){x.preventDefault();return}h==null||h(x)},y=["lm-button","lm-button-".concat(f),"lm-button-".concat(s),i&&"lm-button-disabled",e&&"lm-button-loading",m].filter(Boolean).join(" ");return(0,$.jsxs)("button",S()(S()({ref:a,className:y,disabled:i,onClick:b},O),{},{children:[e&&(0,$.jsx)("span",{className:"lm-button-loading-icon",children:"\u23F3"}),v]}))});U.displayName="Button";var p=U,W=t(48305),k=t.n(W);function N(n,a){var o=(0,L.useCallback)(function(){try{var e=window.localStorage.getItem(n);return e?JSON.parse(e):a}catch(c){return console.warn('Error reading localStorage key "'.concat(n,'":'),c),a}},[n,a]),f=(0,L.useState)(o),d=k()(f,2),s=d[0],g=d[1];(0,L.useEffect)(function(){g(o())},[n,a,o]);var i=(0,L.useCallback)(function(e){try{var c=e instanceof Function?e(s):e;g(c),c==null?window.localStorage.removeItem(n):window.localStorage.setItem(n,JSON.stringify(c))}catch(m){console.warn('Error setting localStorage key "'.concat(n,'":'),m)}},[n,s]),r=(0,L.useCallback)(function(){try{g(a),window.localStorage.removeItem(n)}catch(e){console.warn('Error removing localStorage key "'.concat(n,'":'),e)}},[n,a]);return[s,i,r]}var I=N,E=t(15558),_=t.n(E),u=t(48933),F=function(a,o){if(a.length===0||o.length===0)return null;var f=o[o.length-1];if(f>0){var d=a[a.length-1];if(d&&d.children)return d.children[f-1]}var s=a[a.length-1];return s&&s.isRoot?null:s},l=function(a,o){for(var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=f.clone,s=d===void 0?!1:d,g=function m(v,h,O,b){var y=!v.children||v.children.length===0,V=F(b,O),x=o({node:v,floor:h,parentIndex:O,leaf:y,parentNodes:b,nearestNode:V});if(x)return!0;if(!y)for(var K=0;K<v.children.length;K++){var J=v.children[K],G=m(J,[].concat(_()(h),[K+1]),[].concat(_()(O),[K]),[].concat(_()(b),[v]));if(G)return!0}return!1},i=s?(0,u.Z)(a):a,r=0;r<i.length;r++){var e=i[r],c=g(e,[r+1],[r],[{children:i,isRoot:!0}]);if(c)break}return i},B=function(a){var o=a.treeData,f=a.id,d=null;return l(o,function(s){return f===s.node.id?(d=s,!0):!1}),d},C=function(a){var o=a.treeData,f=a.id,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=d.clone,g=s===void 0?!1:s,i=g?(0,u.Z)(o):o,r={success:!1,info:null,treeData:i,nearestNode:null};return l(i,function(e){if(e.node.id===f){var c=e.parentNodes[e.parentNodes.length-1],m=e.parentIndex[e.parentIndex.length-1];return c&&c.children&&(r.info=e,r.success=!0,r.nearestNode=e.nearestNode,c.children.splice(m,1)),!0}return!1}),r},A=function(a){var o=a.treeData,f=a.id,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=d.clone,g=s===void 0?!1:s,i=g?(0,u.Z)(o):o,r={success:!1,info:null,treeData:i};return l(i,function(e){if(e.node.id===f){r.info=e;var c=e.parentNodes.length===1&&e.parentNodes[0].isRoot;if(c)return r.message="\u8282\u70B9\u5DF2\u7ECF\u662F\u9876\u5C42\uFF0C\u65E0\u6CD5\u518D\u5411\u4E0A\u63D0\u5347",!0;var m=e.parentNodes[e.parentNodes.length-1],v=e.parentNodes[e.parentNodes.length-2],h=e.parentIndex[e.parentIndex.length-1],O=e.parentIndex[e.parentIndex.length-2];if(m&&m.children){var b=m.children.slice(h+1),y=m.children.splice(h,1)[0];if(b.length>0&&m.children.splice(h),b.length>0){var V;y.children||(y.children=[]),(V=y.children).push.apply(V,_()(b))}var x=v.isRoot;x?i.splice(O+1,0,y):v&&v.children&&v.children.splice(O+1,0,y),r.success=!0,r.message=b.length>0?"\u8282\u70B9\u63D0\u5347\u6210\u529F\uFF0C\u5E76\u5C06 ".concat(b.length," \u4E2A\u540E\u7EED\u5144\u5F1F\u8282\u70B9\u4F5C\u4E3A\u5176\u5B50\u8282\u70B9"):"\u8282\u70B9\u63D0\u5347\u6210\u529F"}else r.message="\u8282\u70B9\u63D0\u5347\u5931\u8D25\uFF0C\u65E0\u6CD5\u627E\u5230\u5408\u9002\u7684\u7236\u7EA7\u7ED3\u6784";return!0}return!1}),r.info||(r.message="\u672A\u627E\u5230\u6307\u5B9A\u7684\u8282\u70B9"),r},M=function(a){var o=a.treeData,f=a.id,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=d.clone,g=s===void 0?!1:s,i=g?(0,u.Z)(o):o,r={success:!1,info:null,treeData:i};return l(i,function(e){if(e.node.id===f){r.info=e;var c=e.parentIndex[e.parentIndex.length-1];if(c<=0)return r.message="\u8282\u70B9\u6CA1\u6709\u524D\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9\uFF0C\u65E0\u6CD5\u5411\u4E0B\u964D\u7EA7",!0;var m=e.parentNodes[e.parentNodes.length-1];if(!m||!m.children)return r.message="\u8282\u70B9\u964D\u7EA7\u5931\u8D25\uFF0C\u65E0\u6CD5\u627E\u5230\u7236\u7EA7\u7ED3\u6784",!0;var v=m.children[c-1];if(!v)return r.message="\u8282\u70B9\u964D\u7EA7\u5931\u8D25\uFF0C\u65E0\u6CD5\u627E\u5230\u524D\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9",!0;var h=m.children.splice(c,1)[0];return v.children||(v.children=[]),v.children.push(h),r.success=!0,r.message="\u8282\u70B9\u964D\u7EA7\u6210\u529F",!0}return!1}),r.info||(r.message="\u672A\u627E\u5230\u6307\u5B9A\u7684\u8282\u70B9"),r},j={completeTreeFunc:l,getTreeIdInfo:B,removeTreeNodeById:C,promoteTreeNodeById:A,demoteTreeNodeById:M}},86342:function(Z,T,t){t.r(T),t.d(T,{texts:function(){return R}});const R=[{value:"\u7528\u4E8E\u5728localStorage\u4E2D\u5B58\u50A8\u548C\u83B7\u53D6\u6570\u636E\u7684React Hook\u3002",paraId:0,tocIndex:0},{value:"\u53C2\u6570",paraId:1,tocIndex:6},{value:"\u8BF4\u660E",paraId:1,tocIndex:6},{value:"\u7C7B\u578B",paraId:1,tocIndex:6},{value:"\u9ED8\u8BA4\u503C",paraId:1,tocIndex:6},{value:"key",paraId:1,tocIndex:6},{value:"localStorage\u7684\u952E",paraId:1,tocIndex:6},{value:"string",paraId:1,tocIndex:6},{value:"-",paraId:1,tocIndex:6},{value:"initialValue",paraId:1,tocIndex:6},{value:"\u521D\u59CB\u503C",paraId:1,tocIndex:6},{value:"T",paraId:1,tocIndex:6},{value:"-",paraId:1,tocIndex:6},{value:"\u8FD4\u56DE\u4E00\u4E2A\u5305\u542B\u4E09\u4E2A\u5143\u7D20\u7684\u6570\u7EC4\uFF1A",paraId:2,tocIndex:7},{value:"storedValue: T",paraId:3,tocIndex:7},{value:" - \u5F53\u524D\u5B58\u50A8\u7684\u503C",paraId:3,tocIndex:7},{value:"setValue: (value: T \\| ((val: T) => T)) => void",paraId:3,tocIndex:7},{value:" - \u8BBE\u7F6E\u503C\u7684\u65B9\u6CD5",paraId:3,tocIndex:7},{value:"removeValue: () => void",paraId:3,tocIndex:7},{value:" - \u79FB\u9664\u503C\u7684\u65B9\u6CD5",paraId:3,tocIndex:7},{value:"\u503C\u4F1A\u81EA\u52A8\u5E8F\u5217\u5316\u4E3AJSON\u5B57\u7B26\u4E32\u5B58\u50A8",paraId:4,tocIndex:8},{value:"\u652F\u6301\u51FD\u6570\u5F0F\u66F4\u65B0\uFF1A",paraId:4,tocIndex:8},{value:"setValue(prev => newValue)",paraId:4,tocIndex:8},{value:"\u5982\u679C\u5B58\u50A8\u5931\u8D25\u4F1A\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u8B66\u544A",paraId:4,tocIndex:8},{value:"\u5F53key\u6216initialValue\u53D8\u5316\u65F6\u4F1A\u91CD\u65B0\u83B7\u53D6\u503C",paraId:4,tocIndex:8}]}}]);
